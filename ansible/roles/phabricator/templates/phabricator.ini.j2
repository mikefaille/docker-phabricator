; Template for each Supervisor process.
; Edit this to add additional options.
{% for job, keys in daemons.iteritems() %}
[program:{{job}}]
{# directory={basepath}/scripts/daemon #}
user={{keys.user}}
command={{ phabricator_path }}scripts/daemon/phd-daemon {{job}} --phd=/var/run/phd/pid
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0

{% endfor %}
{# [program:PhabricatorRepositoryPullLocalDaemon] #}
{# command={{ phabricator_path }}/scripts/daemon/phd-daemon PhabricatorRepositoryPullLocalDaemon --phd=/var/tmp/phd/pid #}
{# autostart=true #}
{# autorestart=true #}
{# stdout_logfile=/var/log/supervisor/PhabricatorRepositoryPullLocalDaemon.log #}
{# stderr_logfile=/var/log/supervisor/PhabricatorRepositoryPullLocalDaemon_err.log #}

{# [program:PhabricatorGarbageCollectorDaemon] #}
{# command={{ phabricator_path }}/scripts/daemon/phd-daemon PhabricatorGarbageCollectorDaemon --phd=/var/tmp/phd/pid #}
{# autostart=true #}
{# autorestart=true #}
{# stdout_logfile=/var/log/supervisor/PhabricatorGarbageCollectorDaemon.log #}
{# stderr_logfile=/var/log/supervisor/PhabricatorGarbageCollectorDaemon_err.log #}

{# [program:PhabricatorTaskmasterDaemon1] #}
{# command={{ phabricator_path }}/scripts/daemon/phd-daemon PhabricatorTaskmasterDaemon --phd=/var/tmp/phd/pid #}
{# autostart=true #}
{# autorestart=true #}
{# stdout_logfile=/var/log/supervisor/PhabricatorGarbageCollectorDaemon1.log #}
{# stderr_logfile=/var/log/supervisor/PhabricatorGarbageCollectorDaemon1_err.log #}

{# [program:PhabricatorTaskmasterDaemon2] #}
{# command={{ phabricator_path }}/scripts/daemon/phd-daemon PhabricatorTaskmasterDaemon --phd=/var/tmp/phd/pid #}
{# autostart=true #}
{# autorestart=true #}
{# stdout_logfile=/var/log/supervisor/PhabricatorGarbageCollectorDaemon2.log #}
{# stderr_logfile=/var/log/supervisor/PhabricatorGarbageCollectorDaemon2_err.log #}

{# [program:PhabricatorTaskmasterDaemon3] #}
{# command={{ phabricator_path }}/scripts/daemon/phd-daemon PhabricatorTaskmasterDaemon --phd=/var/tmp/phd/pid #}
{# autostart=true #}
{# autorestart=true #}
{# stdout_logfile=/var/log/supervisor/PhabricatorGarbageCollectorDaemon3.log #}
{# stderr_logfile=/var/log/supervisor/PhabricatorGarbageCollectorDaemon3_err.log #}

{# [program:PhabricatorTaskmasterDaemon4] #}
{# command={{ phabricator_path }}/scripts/daemon/phd-daemon PhabricatorTaskmasterDaemon --phd=/var/tmp/phd/pid #}
{# autostart=true #}
{# autorestart=true #}
{# stdout_logfile=/var/log/supervisor/PhabricatorGarbageCollectorDaemon4.log #}
{# stderr_logfile=/var/log/supervisor/PhabricatorGarbageCollectorDaemon4_err.log #}
